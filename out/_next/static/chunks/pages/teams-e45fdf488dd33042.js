(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[219],{290:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/teams",function(){return n(7628)}])},965:function(e,t,n){"use strict";var r=n(5893),i=n(8527),s=n(9609);n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}t.Z=function(e){return(0,r.jsx)(i.M5,{children:(0,r.jsx)(s.$,c({},e))})}},7628:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var r=n(5893),i=n(8527),s=n(385),o=n(3299),c=n(1163),a=n(7294),u=n(4051),l=n.n(u),d=n(9876),f=n(5074),x=n(9042),h=n(9636),m=n(6114),p=n(894),b=n(5193),j=n(5434),g=n(8100),v=n(965);function y(e,t,n,r,i,s,o){try{var c=e[s](o),a=c.value}catch(u){return void n(u)}c.done?t(a):Promise.resolve(a).then(r,i)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){w(e,t,n[t])}))}return e}var k=function(){var e=(0,a.useState)(0),t=e[0],n=e[1],s=(0,g.ZP)("/api/teams?skip="+t+"&take=10"),o=s.data,u=s.mutate,w=(0,f.pm)(),k=(0,c.useRouter)();if(!o)return(0,r.jsx)(v.Z,{});var S=function(){var e,t=(e=l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/teams/"+t.id,{method:"PATCH",body:JSON.stringify(O({},t))});case 3:return n=e.sent,e.next=6,n.json();case 6:if(r=e.sent,n.ok){e.next=9;break}throw new Error(r.error.message);case 9:return e.next=11,u();case 11:w({status:"success",title:r.message,isClosable:!0}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),i=e.t0,(null!=(s=Error)&&"undefined"!==typeof Symbol&&s[Symbol.hasInstance]?s[Symbol.hasInstance](i):i instanceof s)?w({status:"error",title:"Error updating team",description:e.t0.message,isClosable:!0}):w({status:"error",title:"Error updating team",isClosable:!0});case 17:case"end":return e.stop()}var i,s}),e,null,[[0,14]])})),function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){y(s,r,i,o,c,"next",e)}function c(e){y(s,r,i,o,c,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.xJ,{width:"100%",children:(0,r.jsxs)(x.iA,{variant:"unstyled",border:"1px solid",borderColor:"gray.600",children:[(0,r.jsx)(x.hr,{children:(0,r.jsxs)(x.Tr,{borderBottom:"1px solid",borderColor:"gray.600",children:[(0,r.jsx)(x.Th,{textAlign:"center",fontSize:["md","md","lg"],children:"Name"}),(0,r.jsx)(x.Th,{textAlign:"center",isNumeric:!0,fontSize:["md","md","lg"],children:"Points"}),(0,r.jsx)(x.Th,{textAlign:"center",isNumeric:!0,fontSize:["md","md","lg"],children:"No. of Members"}),(0,r.jsx)(x.Th,{textAlign:"center",fontSize:["md","md","lg"],children:"Verified?"}),(0,r.jsx)(x.Th,{textAlign:"center",fontSize:["md","md","lg"],children:"Edit"})]})}),(0,r.jsx)(x.p3,{children:o.teams.map((function(e){return(0,r.jsxs)(x.Tr,{borderBottom:"1px solid",borderColor:"gray.600",transition:"all 0.1s ease-in-out",_hover:{bg:"gray.700"},children:[(0,r.jsx)(x.Td,{textAlign:"center",children:(0,r.jsxs)(h.CX,{defaultValue:e.name,maxW:"fit-content",mx:"auto",onSubmit:function(t){return S({id:e.id,name:t})},children:[(0,r.jsx)(h.wp,{}),(0,r.jsx)(h.Vm,{})]})}),(0,r.jsx)(x.Td,{textAlign:"center",children:(0,r.jsxs)(m.Y2,{step:1,min:0,defaultValue:e.points,maxW:"100px",mx:"auto",onBlur:function(t){return S({id:e.id,points:+t.target.value})},children:[(0,r.jsx)(m.zu,{}),(0,r.jsxs)(m.Fi,{children:[(0,r.jsx)(m.WQ,{}),(0,r.jsx)(m.Y_,{})]})]})}),(0,r.jsx)(x.Td,{textAlign:"center",children:e._count.users}),(0,r.jsx)(x.Td,{textAlign:"center",children:(0,r.jsx)(p.JO,{as:e.verified?j.ZSR:j.lUB,color:e.verified?"green.500":"red.500",onClick:function(){return S({id:e.id,verified:!e.verified})},cursor:"pointer",transition:"0.2s all ease-in-out",_hover:{opacity:.7},width:"30px",height:"30px"})}),(0,r.jsx)(x.Td,{textAlign:"center",children:(0,r.jsx)(b.hU,{"aria-label":"Edit team",variant:"theme",size:"sm",onClick:function(){return k.push("/teams/"+e.id)},icon:(0,r.jsx)(d.dY,{})})})]},e.id)}))})]})}),(0,r.jsxs)(i.kC,{justifyContent:"space-between",pt:6,children:[(0,r.jsx)(b.zx,{variant:"theme",isDisabled:t<=0,onClick:function(){return n((function(e){return e-10}))},children:"Prev"}),(0,r.jsx)(b.zx,{variant:"theme",isDisabled:o.count<=t+10,onClick:function(){return n((function(e){return e+10}))},children:"Next"})]})]})},S=function(){var e=(0,o.useSession)(),t=e.data,n=e.status,u=(0,c.useRouter)();return(0,a.useEffect)((function(){"authenticated"===n&&t.user.role!==s.Role.ADMIN&&u.push("/"),"unauthenticated"===n&&u.push("/")}),[n]),(0,r.jsxs)(i.M5,{as:"main",bg:"black",py:12,flexDirection:"column",children:[(0,r.jsx)(i.X6,{as:"h1",size:"xl",display:"inline",pb:10,children:"Edit Teams"}),(0,r.jsx)(i.xu,{p:8,pt:12,bg:"gray.800",rounded:"md",flexDirection:"column",maxW:"80%",m:"0 auto",width:"100%",children:(0,r.jsx)(k,{})})]})}}},function(e){e.O(0,[228,690,396,774,888,179],(function(){return t=290,e(e.s=t);var t}));var t=e.O();_N_E=t}]);